{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\").default;\n  var _createClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\").default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebSocketFactory = void 0;\n  var WebSocketFactory = /*#__PURE__*/function () {\n    function WebSocketFactory() {\n      _classCallCheck(this, WebSocketFactory);\n    }\n    return _createClass(WebSocketFactory, null, [{\n      key: \"detectEnvironment\",\n      value: function detectEnvironment() {\n        var _a;\n        if (typeof WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: WebSocket\n          };\n        }\n        if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: globalThis.WebSocket\n          };\n        }\n        if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: global.WebSocket\n          };\n        }\n        if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n          return {\n            type: 'cloudflare',\n            error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n            workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n          };\n        }\n        if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n          return {\n            type: 'unsupported',\n            error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n            workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n          };\n        }\n        if (typeof process !== 'undefined') {\n          // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n          var processVersions = process['versions'];\n          if (processVersions && processVersions['node']) {\n            // Remove 'v' prefix if present and parse the major version\n            var versionString = processVersions['node'];\n            var nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n            // Node.js 22+ should have native WebSocket\n            if (nodeVersion >= 22) {\n              // Check if native WebSocket is available (should be in Node.js 22+)\n              if (typeof globalThis.WebSocket !== 'undefined') {\n                return {\n                  type: 'native',\n                  constructor: globalThis.WebSocket\n                };\n              }\n              // If not available, user needs to provide it\n              return {\n                type: 'unsupported',\n                error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n                workaround: 'Provide a WebSocket implementation via the transport option.'\n              };\n            }\n            // Node.js < 22 doesn't have native WebSocket\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n              workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n            };\n          }\n        }\n        return {\n          type: 'unsupported',\n          error: 'Unknown JavaScript runtime without WebSocket support.',\n          workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n        };\n      }\n    }, {\n      key: \"getWebSocketConstructor\",\n      value: function getWebSocketConstructor() {\n        var env = this.detectEnvironment();\n        if (env.constructor) {\n          return env.constructor;\n        }\n        var errorMessage = env.error || 'WebSocket not supported in this environment.';\n        if (env.workaround) {\n          errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n        }\n        throw new Error(errorMessage);\n      }\n    }, {\n      key: \"createWebSocket\",\n      value: function createWebSocket(url, protocols) {\n        var WS = this.getWebSocketConstructor();\n        return new WS(url, protocols);\n      }\n    }, {\n      key: \"isWebSocketSupported\",\n      value: function isWebSocketSupported() {\n        try {\n          var env = this.detectEnvironment();\n          return env.type === 'native' || env.type === 'ws';\n        } catch (_a) {\n          return false;\n        }\n      }\n    }]);\n  }();\n  exports.WebSocketFactory = WebSocketFactory;\n  exports.default = WebSocketFactory;\n});","lineCount":120,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_classCallCheck"],[4,21,1,13],[4,24,1,13,"require"],[4,31,1,13],[4,32,1,13,"_dependencyMap"],[4,46,1,13],[4,92,1,13,"default"],[4,99,1,13],[5,2,1,13],[5,6,1,13,"_createClass"],[5,18,1,13],[5,21,1,13,"require"],[5,28,1,13],[5,29,1,13,"_dependencyMap"],[5,43,1,13],[5,86,1,13,"default"],[5,93,1,13],[6,2,2,0,"Object"],[6,8,2,6],[6,9,2,7,"defineProperty"],[6,23,2,21],[6,24,2,22,"exports"],[6,31,2,29],[6,33,2,31],[6,45,2,43],[6,47,2,45],[7,4,2,47,"value"],[7,9,2,52],[7,11,2,54],[8,2,2,59],[8,3,2,60],[8,4,2,61],[9,2,3,0,"exports"],[9,9,3,7],[9,10,3,8,"WebSocketFactory"],[9,26,3,24],[9,29,3,27],[9,34,3,32],[9,35,3,33],[10,2,3,34],[10,6,4,6,"WebSocketFactory"],[10,22,4,22],[11,4,4,22],[11,13,4,22,"WebSocketFactory"],[11,30,4,22],[12,6,4,22,"_classCallCheck"],[12,21,4,22],[12,28,4,22,"WebSocketFactory"],[12,44,4,22],[13,4,4,22],[14,4,4,22],[14,11,4,22,"_createClass"],[14,23,4,22],[14,24,4,22,"WebSocketFactory"],[14,40,4,22],[15,6,4,22,"key"],[15,9,4,22],[16,6,4,22,"value"],[16,11,4,22],[16,13,5,4],[16,22,5,11,"detectEnvironment"],[16,39,5,28,"detectEnvironment"],[16,40,5,28],[16,42,5,31],[17,8,6,8],[17,12,6,12,"_a"],[17,14,6,14],[18,8,7,8],[18,12,7,12],[18,19,7,19,"WebSocket"],[18,28,7,28],[18,33,7,33],[18,44,7,44],[18,46,7,46],[19,10,8,12],[19,17,8,19],[20,12,8,21,"type"],[20,16,8,25],[20,18,8,27],[20,26,8,35],[21,12,8,37,"constructor"],[21,23,8,48],[21,25,8,50,"WebSocket"],[22,10,8,60],[22,11,8,61],[23,8,9,8],[24,8,10,8],[24,12,10,12],[24,19,10,19,"globalThis"],[24,29,10,29],[24,34,10,34],[24,45,10,45],[24,49,11,12],[24,56,11,19,"globalThis"],[24,66,11,29],[24,67,11,30,"WebSocket"],[24,76,11,39],[24,81,11,44],[24,92,11,55],[24,94,11,57],[25,10,12,12],[25,17,12,19],[26,12,12,21,"type"],[26,16,12,25],[26,18,12,27],[26,26,12,35],[27,12,12,37,"constructor"],[27,23,12,48],[27,25,12,50,"globalThis"],[27,35,12,60],[27,36,12,61,"WebSocket"],[28,10,12,71],[28,11,12,72],[29,8,13,8],[30,8,14,8],[30,12,14,12],[30,19,14,19,"global"],[30,25,14,25],[30,30,14,30],[30,41,14,41],[30,45,15,12],[30,52,15,19,"global"],[30,58,15,25],[30,59,15,26,"WebSocket"],[30,68,15,35],[30,73,15,40],[30,84,15,51],[30,86,15,53],[31,10,16,12],[31,17,16,19],[32,12,16,21,"type"],[32,16,16,25],[32,18,16,27],[32,26,16,35],[33,12,16,37,"constructor"],[33,23,16,48],[33,25,16,50,"global"],[33,31,16,56],[33,32,16,57,"WebSocket"],[34,10,16,67],[34,11,16,68],[35,8,17,8],[36,8,18,8],[36,12,18,12],[36,19,18,19,"globalThis"],[36,29,18,29],[36,34,18,34],[36,45,18,45],[36,49,19,12],[36,56,19,19,"globalThis"],[36,66,19,29],[36,67,19,30,"WebSocketPair"],[36,80,19,43],[36,85,19,48],[36,96,19,59],[36,100,20,12],[36,107,20,19,"globalThis"],[36,117,20,29],[36,118,20,30,"WebSocket"],[36,127,20,39],[36,132,20,44],[36,143,20,55],[36,145,20,57],[37,10,21,12],[37,17,21,19],[38,12,22,16,"type"],[38,16,22,20],[38,18,22,22],[38,30,22,34],[39,12,23,16,"error"],[39,17,23,21],[39,19,23,23],[39,108,23,112],[40,12,24,16,"workaround"],[40,22,24,26],[40,24,24,28],[41,10,25,12],[41,11,25,13],[42,8,26,8],[43,8,27,8],[43,12,27,13],[43,19,27,20,"globalThis"],[43,29,27,30],[43,34,27,35],[43,45,27,46],[43,49,27,50,"globalThis"],[43,59,27,60],[43,60,27,61,"EdgeRuntime"],[43,71,27,72],[43,75,28,13],[43,82,28,20,"navigator"],[43,91,28,29],[43,96,28,34],[43,107,28,45],[43,112,29,17],[43,113,29,18,"_a"],[43,115,29,20],[43,118,29,23,"navigator"],[43,127,29,32],[43,128,29,33,"userAgent"],[43,137,29,42],[43,143,29,48],[43,147,29,52],[43,151,29,56,"_a"],[43,153,29,58],[43,158,29,63],[43,163,29,68],[43,164,29,69],[43,167,29,72],[43,172,29,77],[43,173,29,78],[43,176,29,81,"_a"],[43,178,29,83],[43,179,29,84,"includes"],[43,187,29,92],[43,188,29,93],[43,201,29,106],[43,202,29,107],[43,203,29,109],[43,205,29,111],[44,10,30,12],[44,17,30,19],[45,12,31,16,"type"],[45,16,31,20],[45,18,31,22],[45,31,31,35],[46,12,32,16,"error"],[46,17,32,21],[46,19,32,23],[46,118,32,122],[47,12,33,16,"workaround"],[47,22,33,26],[47,24,33,28],[48,10,34,12],[48,11,34,13],[49,8,35,8],[50,8,36,8],[50,12,36,12],[50,19,36,19,"process"],[50,26,36,26],[50,31,36,31],[50,42,36,42],[50,44,36,44],[51,10,37,12],[52,10,38,12],[52,14,38,18,"processVersions"],[52,29,38,33],[52,32,38,36,"process"],[52,39,38,43],[52,40,38,44],[52,50,38,54],[52,51,38,55],[53,10,39,12],[53,14,39,16,"processVersions"],[53,29,39,31],[53,33,39,35,"processVersions"],[53,48,39,50],[53,49,39,51],[53,55,39,57],[53,56,39,58],[53,58,39,60],[54,12,40,16],[55,12,41,16],[55,16,41,22,"versionString"],[55,29,41,35],[55,32,41,38,"processVersions"],[55,47,41,53],[55,48,41,54],[55,54,41,60],[55,55,41,61],[56,12,42,16],[56,16,42,22,"nodeVersion"],[56,27,42,33],[56,30,42,36,"parseInt"],[56,38,42,44],[56,39,42,45,"versionString"],[56,52,42,58],[56,53,42,59,"replace"],[56,60,42,66],[56,61,42,67],[56,65,42,71],[56,67,42,73],[56,69,42,75],[56,70,42,76],[56,71,42,77,"split"],[56,76,42,82],[56,77,42,83],[56,80,42,86],[56,81,42,87],[56,82,42,88],[56,83,42,89],[56,84,42,90],[56,85,42,91],[57,12,43,16],[58,12,44,16],[58,16,44,20,"nodeVersion"],[58,27,44,31],[58,31,44,35],[58,33,44,37],[58,35,44,39],[59,14,45,20],[60,14,46,20],[60,18,46,24],[60,25,46,31,"globalThis"],[60,35,46,41],[60,36,46,42,"WebSocket"],[60,45,46,51],[60,50,46,56],[60,61,46,67],[60,63,46,69],[61,16,47,24],[61,23,47,31],[62,18,47,33,"type"],[62,22,47,37],[62,24,47,39],[62,32,47,47],[63,18,47,49,"constructor"],[63,29,47,60],[63,31,47,62,"globalThis"],[63,41,47,72],[63,42,47,73,"WebSocket"],[64,16,47,83],[64,17,47,84],[65,14,48,20],[66,14,49,20],[67,14,50,20],[67,21,50,27],[68,16,51,24,"type"],[68,20,51,28],[68,22,51,30],[68,35,51,43],[69,16,52,24,"error"],[69,21,52,29],[69,23,52,31],[69,34,52,42,"nodeVersion"],[69,45,52,53],[69,88,52,96],[70,16,53,24,"workaround"],[70,26,53,34],[70,28,53,36],[71,14,54,20],[71,15,54,21],[72,12,55,16],[73,12,56,16],[74,12,57,16],[74,19,57,23],[75,14,58,20,"type"],[75,18,58,24],[75,20,58,26],[75,33,58,39],[76,14,59,20,"error"],[76,19,59,25],[76,21,59,27],[76,32,59,38,"nodeVersion"],[76,43,59,49],[76,88,59,94],[77,14,60,20,"workaround"],[77,24,60,30],[77,26,60,32],[77,109,60,115],[77,112,61,24],[77,135,61,47],[77,138,62,24],[78,12,63,16],[78,13,63,17],[79,10,64,12],[80,8,65,8],[81,8,66,8],[81,15,66,15],[82,10,67,12,"type"],[82,14,67,16],[82,16,67,18],[82,29,67,31],[83,10,68,12,"error"],[83,15,68,17],[83,17,68,19],[83,72,68,74],[84,10,69,12,"workaround"],[84,20,69,22],[84,22,69,24],[85,8,70,8],[85,9,70,9],[86,6,71,4],[87,4,71,5],[88,6,71,5,"key"],[88,9,71,5],[89,6,71,5,"value"],[89,11,71,5],[89,13,72,4],[89,22,72,11,"getWebSocketConstructor"],[89,45,72,34,"getWebSocketConstructor"],[89,46,72,34],[89,48,72,37],[90,8,73,8],[90,12,73,14,"env"],[90,15,73,17],[90,18,73,20],[90,22,73,24],[90,23,73,25,"detectEnvironment"],[90,40,73,42],[90,41,73,43],[90,42,73,44],[91,8,74,8],[91,12,74,12,"env"],[91,15,74,15],[91,16,74,16,"constructor"],[91,27,74,27],[91,29,74,29],[92,10,75,12],[92,17,75,19,"env"],[92,20,75,22],[92,21,75,23,"constructor"],[92,32,75,34],[93,8,76,8],[94,8,77,8],[94,12,77,12,"errorMessage"],[94,24,77,24],[94,27,77,27,"env"],[94,30,77,30],[94,31,77,31,"error"],[94,36,77,36],[94,40,77,40],[94,86,77,86],[95,8,78,8],[95,12,78,12,"env"],[95,15,78,15],[95,16,78,16,"workaround"],[95,26,78,26],[95,28,78,28],[96,10,79,12,"errorMessage"],[96,22,79,24],[96,26,79,28],[96,53,79,55,"env"],[96,56,79,58],[96,57,79,59,"workaround"],[96,67,79,69],[96,69,79,71],[97,8,80,8],[98,8,81,8],[98,14,81,14],[98,18,81,18,"Error"],[98,23,81,23],[98,24,81,24,"errorMessage"],[98,36,81,36],[98,37,81,37],[99,6,82,4],[100,4,82,5],[101,6,82,5,"key"],[101,9,82,5],[102,6,82,5,"value"],[102,11,82,5],[102,13,83,4],[102,22,83,11,"createWebSocket"],[102,37,83,26,"createWebSocket"],[102,38,83,27,"url"],[102,41,83,30],[102,43,83,32,"protocols"],[102,52,83,41],[102,54,83,43],[103,8,84,8],[103,12,84,14,"WS"],[103,14,84,16],[103,17,84,19],[103,21,84,23],[103,22,84,24,"getWebSocketConstructor"],[103,45,84,47],[103,46,84,48],[103,47,84,49],[104,8,85,8],[104,15,85,15],[104,19,85,19,"WS"],[104,21,85,21],[104,22,85,22,"url"],[104,25,85,25],[104,27,85,27,"protocols"],[104,36,85,36],[104,37,85,37],[105,6,86,4],[106,4,86,5],[107,6,86,5,"key"],[107,9,86,5],[108,6,86,5,"value"],[108,11,86,5],[108,13,87,4],[108,22,87,11,"isWebSocketSupported"],[108,42,87,31,"isWebSocketSupported"],[108,43,87,31],[108,45,87,34],[109,8,88,8],[109,12,88,12],[110,10,89,12],[110,14,89,18,"env"],[110,17,89,21],[110,20,89,24],[110,24,89,28],[110,25,89,29,"detectEnvironment"],[110,42,89,46],[110,43,89,47],[110,44,89,48],[111,10,90,12],[111,17,90,19,"env"],[111,20,90,22],[111,21,90,23,"type"],[111,25,90,27],[111,30,90,32],[111,38,90,40],[111,42,90,44,"env"],[111,45,90,47],[111,46,90,48,"type"],[111,50,90,52],[111,55,90,57],[111,59,90,61],[112,8,91,8],[112,9,91,9],[112,10,92,8],[112,17,92,15,"_a"],[112,19,92,17],[112,21,92,19],[113,10,93,12],[113,17,93,19],[113,22,93,24],[114,8,94,8],[115,6,95,4],[116,4,95,5],[117,2,95,5],[118,2,97,0,"exports"],[118,9,97,7],[118,10,97,8,"WebSocketFactory"],[118,26,97,24],[118,29,97,27,"WebSocketFactory"],[118,45,97,43],[119,2,98,0,"exports"],[119,9,98,7],[119,10,98,8,"default"],[119,17,98,15],[119,20,98,18,"WebSocketFactory"],[119,36,98,34],[120,0,98,35],[120,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;ACG;ICC;KDkE;IEC;KFU;IGC;KHG;IIC;KJQ;CDC"},"hasCjsExports":true},"type":"js/module"}]}