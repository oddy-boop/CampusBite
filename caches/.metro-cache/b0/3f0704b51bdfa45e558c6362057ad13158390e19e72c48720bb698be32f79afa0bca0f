{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@uploadcare/upload-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":56,"index":88}}],"key":"O2obDCato+1wiO91AqaigM1B07U=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoVirtualEnv = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[3], \"react\");\n  var React = _interopNamespace(_react);\n  var _uploadcareUploadClient = require(_dependencyMap[4], \"@uploadcare/upload-client\");\n  var client = new _uploadcareUploadClient.UploadClient({\n    publicKey: _expoVirtualEnv.env.EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY\n  });\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n            if (asset.file) {\n              var formData = new FormData();\n              formData.append(\"file\", asset.file);\n              response = yield fetch(\"/_create/api/upload/\", {\n                method: \"POST\",\n                body: formData\n              });\n            } else {\n              // Fallback to presigned Uploadcare upload\n              var presignRes = yield fetch(\"/_create/api/upload/presign/\", {\n                method: \"POST\"\n              });\n              var _yield$presignRes$jso = yield presignRes.json(),\n                secureSignature = _yield$presignRes$jso.secureSignature,\n                secureExpire = _yield$presignRes$jso.secureExpire;\n              var result = yield client.uploadFile(asset, {\n                fileName: asset.name ?? asset.uri.split(\"/\").pop(),\n                contentType: asset.mimeType,\n                secureSignature,\n                secureExpire\n              });\n              return {\n                url: `${_expoVirtualEnv.env.EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL}/${result.uuid}/`,\n                mimeType: result.mimeType || null\n              };\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response.ok) {\n            if (response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Upload failed\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":158,"map":[[28,2,88,0,"Object"],[28,8,88,0],[28,9,88,0,"defineProperty"],[28,23,88,0],[28,24,88,0,"exports"],[28,31,88,0],[29,4,88,0,"enumerable"],[29,14,88,0],[30,4,88,0,"get"],[30,7,88,0],[30,18,88,0,"get"],[30,19,88,0],[31,6,88,0],[31,13,88,0,"_default"],[31,21,88,0],[32,4,88,0],[33,2,88,0],[34,2,87,0,"Object"],[34,8,87,0],[34,9,87,0,"defineProperty"],[34,23,87,0],[34,24,87,0,"exports"],[34,31,87,0],[35,4,87,0,"enumerable"],[35,14,87,0],[36,4,87,0,"get"],[36,7,87,0],[36,18,87,0,"get"],[36,19,87,0],[37,6,87,0],[37,13,87,9,"useUpload"],[37,22,87,18],[38,4,87,18],[39,2,87,18],[40,2,87,21],[40,6,87,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,87,21],[40,45,87,21,"require"],[40,52,87,21],[40,53,87,21,"_dependencyMap"],[40,67,87,21],[41,2,87,21],[41,6,87,21,"_asyncToGenerator"],[41,23,87,21],[41,26,87,21,"_interopDefault"],[41,41,87,21],[41,42,87,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,87,21],[42,2,87,21],[42,6,87,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,87,21],[42,42,87,21,"require"],[42,49,87,21],[42,50,87,21,"_dependencyMap"],[42,64,87,21],[43,2,87,21],[43,6,87,21,"_slicedToArray"],[43,20,87,21],[43,23,87,21,"_interopDefault"],[43,38,87,21],[43,39,87,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,87,21],[44,2,87,21],[44,6,87,21,"_expoVirtualEnv"],[44,21,87,21],[44,24,87,21,"require"],[44,31,87,21],[44,32,87,21,"_dependencyMap"],[44,46,87,21],[45,2,1,0],[45,6,1,0,"_react"],[45,12,1,0],[45,15,1,0,"require"],[45,22,1,0],[45,23,1,0,"_dependencyMap"],[45,37,1,0],[46,2,1,0],[46,6,1,0,"React"],[46,11,1,0],[46,14,1,0,"_interopNamespace"],[46,31,1,0],[46,32,1,0,"_react"],[46,38,1,0],[47,2,2,0],[47,6,2,0,"_uploadcareUploadClient"],[47,29,2,0],[47,32,2,0,"require"],[47,39,2,0],[47,40,2,0,"_dependencyMap"],[47,54,2,0],[48,2,3,0],[48,6,3,6,"client"],[48,12,3,12],[48,15,3,15],[48,19,3,19,"UploadClient"],[48,42,3,31],[48,43,3,31,"UploadClient"],[48,55,3,31],[48,56,3,32],[49,4,3,34,"publicKey"],[49,13,3,43],[49,15,3,43,"_expoVirtualEnv"],[49,30,3,43],[49,31,3,43,"env"],[49,34,3,43],[49,35,3,43,"EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY"],[50,2,3,91],[50,3,3,92],[50,4,3,93],[51,2,5,0],[51,11,5,9,"useUpload"],[51,20,5,18,"useUpload"],[51,21,5,18],[51,23,5,21],[52,4,5,21,"_s"],[52,6,5,21],[53,4,6,2],[53,8,6,2,"_React$useState"],[53,23,6,2],[53,26,6,32,"React"],[53,31,6,37],[53,32,6,38,"useState"],[53,40,6,46],[53,41,6,47],[53,46,6,52],[53,47,6,53],[54,6,6,53,"_React$useState2"],[54,22,6,53],[54,29,6,53,"_slicedToArray"],[54,43,6,53],[54,44,6,53,"default"],[54,51,6,53],[54,53,6,53,"_React$useState"],[54,68,6,53],[55,6,6,9,"loading"],[55,13,6,16],[55,16,6,16,"_React$useState2"],[55,32,6,16],[56,6,6,18,"setLoading"],[56,16,6,28],[56,19,6,28,"_React$useState2"],[56,35,6,28],[57,4,7,2],[57,8,7,8,"upload"],[57,14,7,14],[57,17,7,17,"React"],[57,22,7,22],[57,23,7,23,"useCallback"],[57,34,7,34],[58,6,7,34],[58,10,7,34,"_ref"],[58,14,7,34],[58,21,7,34,"_asyncToGenerator"],[58,38,7,34],[58,39,7,34,"default"],[58,46,7,34],[58,48,7,35],[58,59,7,42,"input"],[58,64,7,47],[58,66,7,52],[59,8,8,4],[59,12,8,8],[60,10,9,6,"setLoading"],[60,20,9,16],[60,21,9,17],[60,25,9,21],[60,26,9,22],[61,10,10,6],[61,14,10,10,"response"],[61,22,10,18],[62,10,12,6],[62,14,12,10],[62,32,12,28],[62,36,12,32,"input"],[62,41,12,37],[62,45,12,41,"input"],[62,50,12,46],[62,51,12,47,"reactNativeAsset"],[62,67,12,63],[62,69,12,65],[63,12,13,8],[63,16,13,12,"asset"],[63,21,13,17],[63,24,13,20,"input"],[63,29,13,25],[63,30,13,26,"reactNativeAsset"],[63,46,13,42],[64,12,15,8],[64,16,15,12,"asset"],[64,21,15,17],[64,22,15,18,"file"],[64,26,15,22],[64,28,15,24],[65,14,16,10],[65,18,16,16,"formData"],[65,26,16,24],[65,29,16,27],[65,33,16,31,"FormData"],[65,41,16,39],[65,42,16,40],[65,43,16,41],[66,14,17,10,"formData"],[66,22,17,18],[66,23,17,19,"append"],[66,29,17,25],[66,30,17,26],[66,36,17,32],[66,38,17,34,"asset"],[66,43,17,39],[66,44,17,40,"file"],[66,48,17,44],[66,49,17,45],[67,14,19,10,"response"],[67,22,19,18],[67,31,19,27,"fetch"],[67,36,19,32],[67,37,19,33],[67,59,19,55],[67,61,19,57],[68,16,20,12,"method"],[68,22,20,18],[68,24,20,20],[68,30,20,26],[69,16,21,12,"body"],[69,20,21,16],[69,22,21,18,"formData"],[70,14,22,10],[70,15,22,11],[70,16,22,12],[71,12,23,8],[71,13,23,9],[71,19,23,15],[72,14,24,10],[73,14,25,10],[73,18,25,16,"presignRes"],[73,28,25,26],[73,37,25,35,"fetch"],[73,42,25,40],[73,43,25,41],[73,73,25,71],[73,75,25,73],[74,16,26,12,"method"],[74,22,26,18],[74,24,26,20],[75,14,27,10],[75,15,27,11],[75,16,27,12],[76,14,28,10],[76,18,28,10,"_yield$presignRes$jso"],[76,39,28,10],[76,48,28,58,"presignRes"],[76,58,28,68],[76,59,28,69,"json"],[76,63,28,73],[76,64,28,74],[76,65,28,75],[77,16,28,18,"secureSignature"],[77,31,28,33],[77,34,28,33,"_yield$presignRes$jso"],[77,55,28,33],[77,56,28,18,"secureSignature"],[77,71,28,33],[78,16,28,35,"secureExpire"],[78,28,28,47],[78,31,28,47,"_yield$presignRes$jso"],[78,52,28,47],[78,53,28,35,"secureExpire"],[78,65,28,47],[79,14,30,10],[79,18,30,16,"result"],[79,24,30,22],[79,33,30,31,"client"],[79,39,30,37],[79,40,30,38,"uploadFile"],[79,50,30,48],[79,51,30,49,"asset"],[79,56,30,54],[79,58,30,56],[80,16,31,12,"fileName"],[80,24,31,20],[80,26,31,22,"asset"],[80,31,31,27],[80,32,31,28,"name"],[80,36,31,32],[80,40,31,36,"asset"],[80,45,31,41],[80,46,31,42,"uri"],[80,49,31,45],[80,50,31,46,"split"],[80,55,31,51],[80,56,31,52],[80,59,31,55],[80,60,31,56],[80,61,31,57,"pop"],[80,64,31,60],[80,65,31,61],[80,66,31,62],[81,16,32,12,"contentType"],[81,27,32,23],[81,29,32,25,"asset"],[81,34,32,30],[81,35,32,31,"mimeType"],[81,43,32,39],[82,16,33,12,"secureSignature"],[82,31,33,27],[83,16,34,12,"secureExpire"],[84,14,35,10],[84,15,35,11],[84,16,35,12],[85,14,36,10],[85,21,36,17],[86,16,36,19,"url"],[86,19,36,22],[86,21,36,24],[86,24,36,24,"_expoVirtualEnv"],[86,39,36,24],[86,40,36,24,"env"],[86,43,36,24],[86,44,36,24,"EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL"],[86,84,36,24],[86,88,36,83,"result"],[86,94,36,89],[86,95,36,90,"uuid"],[86,99,36,94],[86,102,36,97],[87,16,36,99,"mimeType"],[87,24,36,107],[87,26,36,109,"result"],[87,32,36,115],[87,33,36,116,"mimeType"],[87,41,36,124],[87,45,36,128],[88,14,36,133],[88,15,36,134],[89,12,37,8],[90,10,38,6],[90,11,38,7],[90,17,38,13],[90,21,38,17],[90,26,38,22],[90,30,38,26,"input"],[90,35,38,31],[90,37,38,33],[91,12,39,8,"response"],[91,20,39,16],[91,29,39,25,"fetch"],[91,34,39,30],[91,35,39,31],[91,57,39,53],[91,59,39,55],[92,14,40,10,"method"],[92,20,40,16],[92,22,40,18],[92,28,40,24],[93,14,41,10,"headers"],[93,21,41,17],[93,23,41,19],[94,16,42,12],[94,30,42,26],[94,32,42,28],[95,14,43,10],[95,15,43,11],[96,14,44,10,"body"],[96,18,44,14],[96,20,44,16,"JSON"],[96,24,44,20],[96,25,44,21,"stringify"],[96,34,44,30],[96,35,44,31],[97,16,44,33,"url"],[97,19,44,36],[97,21,44,38,"input"],[97,26,44,43],[97,27,44,44,"url"],[98,14,44,48],[98,15,44,49],[99,12,45,8],[99,13,45,9],[99,14,45,10],[100,10,46,6],[100,11,46,7],[100,17,46,13],[100,21,46,17],[100,29,46,25],[100,33,46,29,"input"],[100,38,46,34],[100,40,46,36],[101,12,47,8,"response"],[101,20,47,16],[101,29,47,25,"fetch"],[101,34,47,30],[101,35,47,31],[101,57,47,53],[101,59,47,55],[102,14,48,10,"method"],[102,20,48,16],[102,22,48,18],[102,28,48,24],[103,14,49,10,"headers"],[103,21,49,17],[103,23,49,19],[104,16,50,12],[104,30,50,26],[104,32,50,28],[105,14,51,10],[105,15,51,11],[106,14,52,10,"body"],[106,18,52,14],[106,20,52,16,"JSON"],[106,24,52,20],[106,25,52,21,"stringify"],[106,34,52,30],[106,35,52,31],[107,16,52,33,"base64"],[107,22,52,39],[107,24,52,41,"input"],[107,29,52,46],[107,30,52,47,"base64"],[108,14,52,54],[108,15,52,55],[109,12,53,8],[109,13,53,9],[109,14,53,10],[110,10,54,6],[110,11,54,7],[110,17,54,13],[111,12,55,8,"response"],[111,20,55,16],[111,29,55,25,"fetch"],[111,34,55,30],[111,35,55,31],[111,57,55,53],[111,59,55,55],[112,14,56,10,"method"],[112,20,56,16],[112,22,56,18],[112,28,56,24],[113,14,57,10,"headers"],[113,21,57,17],[113,23,57,19],[114,16,58,12],[114,30,58,26],[114,32,58,28],[115,14,59,10],[115,15,59,11],[116,14,60,10,"body"],[116,18,60,14],[116,20,60,16,"input"],[116,25,60,21],[116,26,60,22,"buffer"],[117,12,61,8],[117,13,61,9],[117,14,61,10],[118,10,62,6],[119,10,63,6],[119,14,63,10],[119,15,63,11,"response"],[119,23,63,19],[119,24,63,20,"ok"],[119,26,63,22],[119,28,63,24],[120,12,64,8],[120,16,64,12,"response"],[120,24,64,20],[120,25,64,21,"status"],[120,31,64,27],[120,36,64,32],[120,39,64,35],[120,41,64,37],[121,14,65,10],[121,20,65,16],[121,24,65,20,"Error"],[121,29,65,25],[121,30,65,26],[121,62,65,58],[121,63,65,59],[122,12,66,8],[123,12,67,8],[123,18,67,14],[123,22,67,18,"Error"],[123,27,67,23],[123,28,67,24],[123,43,67,39],[123,44,67,40],[124,10,68,6],[125,10,69,6],[125,14,69,12,"data"],[125,18,69,16],[125,27,69,25,"response"],[125,35,69,33],[125,36,69,34,"json"],[125,40,69,38],[125,41,69,39],[125,42,69,40],[126,10,70,6],[126,17,70,13],[127,12,70,15,"url"],[127,15,70,18],[127,17,70,20,"data"],[127,21,70,24],[127,22,70,25,"url"],[127,25,70,28],[128,12,70,30,"mimeType"],[128,20,70,38],[128,22,70,40,"data"],[128,26,70,44],[128,27,70,45,"mimeType"],[128,35,70,53],[128,39,70,57],[129,10,70,62],[129,11,70,63],[130,8,71,4],[130,9,71,5],[130,10,71,6],[130,17,71,13,"uploadError"],[130,28,71,24],[130,30,71,26],[131,10,72,6],[131,14,72,10,"uploadError"],[131,25,72,21],[131,37,72,33,"Error"],[131,42,72,38],[131,44,72,40],[132,12,73,8],[132,19,73,15],[133,14,73,17,"error"],[133,19,73,22],[133,21,73,24,"uploadError"],[133,32,73,35],[133,33,73,36,"message"],[134,12,73,44],[134,13,73,45],[135,10,74,6],[136,10,75,6],[136,14,75,10],[136,21,75,17,"uploadError"],[136,32,75,28],[136,37,75,33],[136,45,75,41],[136,47,75,43],[137,12,76,8],[137,19,76,15],[138,14,76,17,"error"],[138,19,76,22],[138,21,76,24,"uploadError"],[139,12,76,36],[139,13,76,37],[140,10,77,6],[141,10,78,6],[141,17,78,13],[142,12,78,15,"error"],[142,17,78,20],[142,19,78,22],[143,10,78,38],[143,11,78,39],[144,8,79,4],[144,9,79,5],[144,18,79,14],[145,10,80,6,"setLoading"],[145,20,80,16],[145,21,80,17],[145,26,80,22],[145,27,80,23],[146,8,81,4],[147,6,82,2],[147,7,82,3],[148,6,82,3],[148,23,82,3,"_x"],[148,25,82,3],[149,8,82,3],[149,15,82,3,"_ref"],[149,19,82,3],[149,20,82,3,"apply"],[149,25,82,3],[149,32,82,3,"arguments"],[149,41,82,3],[150,6,82,3],[151,4,82,3],[151,9,82,5],[151,11,82,7],[151,12,82,8],[152,4,84,2],[152,11,84,9],[152,12,84,10,"upload"],[152,18,84,16],[152,20,84,18],[153,6,84,20,"loading"],[154,4,84,28],[154,5,84,29],[154,6,84,30],[155,2,85,0],[156,2,85,1,"_s"],[156,4,85,1],[156,5,5,9,"useUpload"],[156,14,5,18],[157,2,88,0],[157,6,88,0,"_default"],[157,14,88,0],[157,17,88,15,"useUpload"],[157,26,88,24],[158,0,88,25],[158,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACI;mCCE;GD2E;CDG"},"hasCjsExports":false},"type":"js/module"}]}